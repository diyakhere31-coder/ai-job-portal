{% extends 'jobapp/base.html' %}
{% block content %}

<style>
/* ------------------------------
   PREMIUM DASHBOARD UI
--------------------------------*/

/* Page Title */
.page-title {
    font-weight: 800;
    color: #0b155a;
    margin-top: 20px;
    letter-spacing: 0.5px;
}

/* Header Card */
.header-card {
    background: linear-gradient(135deg, #1a237e, #3949ab);
    color: #fff;
    padding: 22px 30px;
    border-radius: 14px;
    margin-top: 18px;
    box-shadow: 0 4px 18px rgba(0,0,0,0.25);
}

/* Search Bar */
.search-container {
    margin-top: 18px;
    display: flex;
    justify-content: flex-end;
}

.search-box {
    width: 100%;
    max-width: 350px;
    border-radius: 28px !important;
    padding-left: 40px;
    border: 1px solid #cfd3e9;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    transition: .2s;
}

.search-box:focus {
    border-color: #1a237e;
    box-shadow: 0 0 10px rgba(26,35,126,0.25);
}

/* Search Icon */
.search-icon {
    position: relative;
    left: 30px;
    top: 32px;
    color: #1a237e;
}

/* Table Wrapper */
.table-container {
    margin-top: 25px;
    background: #ffffff;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 6px 20px rgba(0,0,0,0.10);
}

/* Table head */
.table thead {
    background: #1a237e;
    color: #fff;
    font-size: 15px;
    letter-spacing: 0.4px;
}

/* Table rows */
.table tbody tr {
    transition: 0.25s;
}

.table tbody tr:hover {
    background: #eef1ff;
}

/* Action Buttons */
.action-btn {
    padding: 7px 14px;
    font-size: 13px;
    border-radius: 6px;
    font-weight: 500;
}

/* Category Badges */
.category-badge {
    background: #e8e9ff;
    color: #1a237e;
    padding: 6px 12px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 12px;
}

/* Status Badges */
.badge-status {
    font-size: 12px;
    padding: 6px 12px;
    border-radius: 20px;
    font-weight: 600;
}

.badge-pending {
    background: #fff3cd;
    color: #856404;
}

.badge-approved {
    background: #d4edda;
    color: #155724;
}

.badge-rejected {
    background: #f8d7da;
    color: #721c24;
}

</style>

<!-- Page Title -->
<h2 class="page-title">All Job Applicants</h2>

<!-- Section Header Card -->
<div class="header-card">
    <h4 class="mb-0">Manage, Review & Respond to All Job Applications</h4>
    <p class="mt-1 mb-0" style="opacity:0.85;">
        Track the latest applicants and take quick actions from your admin dashboard.
    </p>
</div>

<!-- Search -->
<div class="search-container">
    <form method="GET" style="width:100%; max-width:350px;">
        <span class="search-icon"><i class="bi bi-search"></i></span>
        <input type="text" name="q" class="form-control search-box"
               placeholder="Search applicants...">
    </form>
</div>

<!-- Applicants Table -->
<div class="table-container">
    <table class="table table-bordered table-striped mb-0">
        <thead>
            <tr>
                <th>Name</th>
                <th>Job Title</th>
                <th>Category</th>
                <th>Email</th>
                <th>Applied On</th>
                <th>Status</th>
                <th style="width: 180px;">Actions</th>
            </tr>
        </thead>

        <tbody>
            {% for app in applications %}
            <tr>
                <td><strong>{{ app.name }}</strong></td>
                <td>{{ app.job_title }}</td>

                <!-- Category Badge -->
                <td>
                    <span class="category-badge">{{ app.category }}</span>
                </td>

                <td>{{ app.email }}</td>
                <td>{{ app.applied_on|date:"d M Y" }}</td>

                <!-- Status -->
                <td>
                    {% if app.status == "Pending" %}
                        <span class="badge-status badge-pending">Pending</span>
                    {% elif app.status == "Approved" %}
                        <span class="badge-status badge-approved">Approved</span>
                    {% else %}
                        <span class="badge-status badge-rejected">Rejected</span>
                    {% endif %}
                </td>

                <td>
                    <!-- View -->
                    <a href="{% url 'admin_view_applicant' app.id %}" 
                       class="btn btn-primary btn-sm action-btn">View</a>

                    <!-- Delete -->
                    <a href="{% url 'admin_delete_application' app.id %}" 
                       class="btn btn-danger btn-sm action-btn"
                       onclick="return confirm('Are you sure you want to delete this application?');">
                       Delete
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
